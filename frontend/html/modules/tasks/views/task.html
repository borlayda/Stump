<div class="task" ng-controller="TaskController">
    <div class="taskProperties">
        <h1>{{selTask.title}}</h1>
        <div style="float: right; width: 120px;">
            <div ng-class="{'btn-success': selTask.status == 'CLOSED', 'btn-info': selTask.status == 'OPEN', 'btn-warning': selTask.status == 'REOPENED'}">
                <h4 style="padding: 10px;">{{selTask.status}}</h4>
            </div>
        </div>
        <div class="description">{{selTask.description}}</div>
        <div>
            <button ng-click="changeTaskStatus('OPEN');" class="btn btn-primary">OPEN</button>
            <button ng-click="changeTaskStatus('CLOSED');" class="btn btn-success">CLOSE</button>
            <button ng-click="changeTaskStatus('REOPENED');" class="btn btn-warning">REOPEN</button>
        </div>
        <h2>Users on this task:</h2>
        <table class="table table-striped">
            <tr>
                <th>Name</th>
                <th>E-mail</th>
                <th>Role</th>
            </tr>
            <tr ng-repeat="user in selTask.users">
                <td>{{user.name}}</td>
                <td>{{user.email}}</td>
                <td>{{user.role}}</td>
            </tr>
        </table>
        <h2>{{selTask.title}}'s comments:</h2>
        <div ng-repeat="comment in selTask.comments">
            <div class="modal-content">
                <div class="modal-header">
                    <div style="float: left">{{comment.author.name}}:</div>
                    <div style="float: right">{{comment.date}}:</div>
                </div>
                <div class="modal-body">
                    {{comment.text}}
                </div>
            </div>
            <div class="modal-content" ng-repeat="subcomment in comment.comments">
                <div class="modal-header">
                    <div style="float: left">{{subcomment.author.name}}:</div>
                    <div style="float: right">{{subcomment.date}}:</div>
                </div>
                <div class="modal-body">
                    {{subcomment.text}}
                </div>
            </div>
        </div>
        <div class="modal-content" style="padding: 20px;">
            Name: {{loginUser.name}}<br/>
            Text: <br/><textarea ng-model="text" class="newComment modal-content"></textarea><br/>
            <a ng-click="addComment(loginUser.id, task.id, text);">Add comment</a>
        </div>
    </div>

</div>